

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ROS Melodic + Ubuntu 18.04 &mdash; Fetch &amp; Freight Research Edition Melodic documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/override.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Fetch &amp; Freight Research Edition Melodic documentation" href="index.html"/>
        <link rel="next" title="Tutorial: Visualization" href="visualization.html"/>
        <link rel="prev" title="Care And Feeding" href="care_and_feeding.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home">
        

          Fetch & Freight <br/> Research Edition

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#before-you-start">Before you Start</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="safety.html">Safety</a><ul>
<li class="toctree-l2"><a class="reference internal" href="safety.html#safety-overview">Safety Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="safety.html#design-features">Design Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="safety.html#general-usage-guidelines">General Usage Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="safety.html#warning-labels">Warning Labels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="safety.html#pinch-point">Pinch Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="safety.html#electrical-shock">Electrical Shock</a></li>
<li class="toctree-l3"><a class="reference internal" href="safety.html#laser-beam">Laser Beam</a></li>
<li class="toctree-l3"><a class="reference internal" href="safety.html#read-the-manual">Read The Manual</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="in_the_box.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="in_the_box.html#what-s-in-box">What’s In Box</a><ul>
<li class="toctree-l3"><a class="reference internal" href="in_the_box.html#fetch-and-freight">Fetch and Freight</a></li>
<li class="toctree-l3"><a class="reference internal" href="in_the_box.html#toolkit">Toolkit</a></li>
<li class="toctree-l3"><a class="reference internal" href="in_the_box.html#robot-power-supply">Robot Power Supply</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="in_the_box.html#running-fetch-and-freight">Running Fetch and Freight</a><ul>
<li class="toctree-l3"><a class="reference internal" href="in_the_box.html#turning-on-fetch-and-freight">Turning on Fetch and Freight</a></li>
<li class="toctree-l3"><a class="reference internal" href="in_the_box.html#logging-in">Logging In</a></li>
<li class="toctree-l3"><a class="reference internal" href="in_the_box.html#connecting-a-monitor-optional">Connecting a Monitor (Optional)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="in_the_box.html#default-user-account">Default User Account</a></li>
<li class="toctree-l4"><a class="reference internal" href="in_the_box.html#creating-user-accounts">Creating User Accounts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="in_the_box.html#tucking-fetch-s-arm">Tucking Fetch’s Arm</a></li>
<li class="toctree-l3"><a class="reference internal" href="in_the_box.html#driving-fetch-and-freight-with-a-joystick">Driving Fetch and Freight with a Joystick</a><ul>
<li class="toctree-l4"><a class="reference internal" href="in_the_box.html#moving-the-base-with-your-keyboard">Moving the Base with your Keyboard</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="in_the_box.html#visualizing-data">Visualizing Data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="in_the_box.html#using-the-runtime-monitor">Using the Runtime Monitor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="in_the_box.html#putting-fetch-and-freight-away">Putting Fetch and Freight Away</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="robot_hardware.html">Robot Hardware Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="robot_hardware.html#mechanism-terminology">Mechanism Terminology</a><ul>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#link">Link</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#frame">Frame</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#joint">Joint</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#fetch-home-pose">Fetch Home Pose</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#coordinate-system">Coordinate System</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#naming-conventions">Naming Conventions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="robot_hardware.html#mechanical-overview">Mechanical Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#environmental">Environmental</a><ul>
<li class="toctree-l4"><a class="reference internal" href="robot_hardware.html#drive-surface">Drive Surface</a></li>
<li class="toctree-l4"><a class="reference internal" href="robot_hardware.html#incline-surface">Incline Surface</a></li>
<li class="toctree-l4"><a class="reference internal" href="robot_hardware.html#water">Water</a></li>
<li class="toctree-l4"><a class="reference internal" href="robot_hardware.html#temperature-and-humidity">Temperature and Humidity</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#forces-and-torques">Forces and Torques</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#joint-limits-and-types">Joint Limits and Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#mount-points">Mount Points</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#gripper-modularity-interface">Gripper Modularity Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="robot_hardware.html#electrical-overview">Electrical Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#breakers">Breakers</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#power-disconnect-switch">Power Disconnect Switch</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#runstop">Runstop</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#access-panel">Access Panel</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="robot_hardware.html#motion-control">Motion Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="robot_hardware.html#sensor-overview">Sensor Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#base-laser">Base Laser</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#imu">IMU</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#head-camera">Head Camera</a></li>
<li class="toctree-l3"><a class="reference internal" href="robot_hardware.html#gripper-sensors">Gripper Sensors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="computer.html">Computer Overview and Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="computer.html#default-user-account">Default User Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="computer.html#creating-user-accounts">Creating User Accounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="computer.html#networking">Networking</a><ul>
<li class="toctree-l3"><a class="reference internal" href="computer.html#connecting-the-robot-to-a-wireless-network">Connecting the Robot to a Wireless Network</a></li>
<li class="toctree-l3"><a class="reference internal" href="computer.html#configuring-the-robot-to-use-a-static-ip-for-access-panel-ethernet">Configuring the Robot to use a Static IP for Access Panel Ethernet</a></li>
<li class="toctree-l3"><a class="reference internal" href="computer.html#troubleshooting-ros-interactions-with-robot-across-a-network">Troubleshooting ROS Interactions with Robot Across a Network</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="computer.html#clock-synchronization">Clock Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="computer.html#upstart-services">Upstart Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="computer.html#log-files">Log Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="computer.html#speakers-and-audio">Speakers and Audio</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="care_and_feeding.html">Care And Feeding</a><ul>
<li class="toctree-l2"><a class="reference internal" href="care_and_feeding.html#charging">Charging</a></li>
<li class="toctree-l2"><a class="reference internal" href="care_and_feeding.html#batteries">Batteries</a></li>
<li class="toctree-l2"><a class="reference internal" href="care_and_feeding.html#updating-your-robot">Updating Your Robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="care_and_feeding.html#re-setting-up-apt-sources">Re-Setting up apt Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="care_and_feeding.html#cleaning-your-robot">Cleaning Your Robot</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ROS Melodic + Ubuntu 18.04</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#known-issues">Known issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upgrading-your-robot-to-ros-melodic-ubuntu-18-04">Upgrading Your Robot to ROS Melodic + Ubuntu 18.04</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#before-upgrade">Before Upgrade</a></li>
<li class="toctree-l3"><a class="reference internal" href="#automated-installer-18-04-and-ros-melodic-install">AUTOMATED INSTALLER: 18.04 and ROS Melodic Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manual-approach-18-04-install-and-installing-ros-fetch-packages">MANUAL APPROACH: 18.04 Install and Installing ROS/Fetch Packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#post-install-validation">Post-install Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compatibility-of-other-computers-used-with-the-robot">Compatibility of Other Computers Used with the Robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#not-supported-upgrading-from-14-04-to-18-04-via-16-04">Not Supported: Upgrading from 14.04 to 18.04 (via 16.04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#appendices">Appendices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subsequent-upgrade-notes">Subsequent upgrade notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#accessing-boot-menu-on-fetch-robots">Accessing Boot Menu on Fetch Robots</a></li>
<li class="toctree-l3"><a class="reference internal" href="#disk-filling-issue">Disk filling issue</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ensuring-robot-s-ethernet-ports-are-configured-correctly">Ensuring robot’s ethernet ports are configured correctly</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Tutorial: Visualization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="visualization.html#visualizing-with-rviz">Visualizing with RVIZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualization.html#using-the-runtime-monitor">Using the Runtime Monitor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gazebo.html">Tutorial: Gazebo Simulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gazebo.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="gazebo.html#starting-the-simulator">Starting the Simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="gazebo.html#simulating-a-freight">Simulating a Freight</a></li>
<li class="toctree-l2"><a class="reference internal" href="gazebo.html#visualizing-with-rviz">Visualizing with RVIZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="gazebo.html#running-the-mobile-manipulation-demo">Running the Mobile Manipulation Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="gazebo.html#launch-it-on-rosds">Launch it on ROSDS</a></li>
<li class="toctree-l2"><a class="reference internal" href="gazebo.html#simulation-vs-real-robots">Simulation vs. Real Robots</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="teleop.html">Tutorial: Robot Teleop</a><ul>
<li class="toctree-l2"><a class="reference internal" href="teleop.html#using-the-robot-joystick">Using the Robot Joystick</a></li>
<li class="toctree-l2"><a class="reference internal" href="teleop.html#moving-the-base-with-your-keyboard">Moving the Base with your Keyboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="teleop.html#id1">Software Runstop</a><ul>
<li class="toctree-l3"><a class="reference internal" href="teleop.html#using-software-runstop">Using Software Runstop</a></li>
<li class="toctree-l3"><a class="reference internal" href="teleop.html#enable-teleop-software-runstop">Enable Teleop Software Runstop</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="teleop.html#re-pairing-robot-joystick-that-won-t-connect">Re-pairing Robot Joystick that Won’t Connect</a></li>
<li class="toctree-l2"><a class="reference internal" href="teleop.html#using-deadzone-parameter-to-correct-drift">Using Deadzone Parameter to Correct Drift</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="navigation.html">Tutorial: Navigation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="navigation.html#running-navigation-in-gazebo-simulation">Running Navigation in Gazebo Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="navigation.html#running-navigation-on-a-real-robot">Running Navigation on a Real Robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="navigation.html#building-a-map">Building A Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="navigation.html#sending-waypoints">Sending Waypoints</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="manipulation.html">Tutorial: Manipulation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="manipulation.html#getting-started-demo">Getting Started Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulation.html#running-the-pick-and-place-demo">Running the Pick and Place Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulation.html#running-moveit-on-a-robot">Running MoveIt! on a Robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulation.html#simple-moveit-disco-example">Simple MoveIt! Disco Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulation.html#simple-moveit-wave-example">Simple MoveIt! Wave Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulation.html#more-information-and-tutorials-on-moveit">More information and Tutorials on MoveIt!</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="perception.html">Tutorial: Perception</a><ul>
<li class="toctree-l2"><a class="reference internal" href="perception.html#head-camera-topics">Head Camera Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="perception.html#running-the-pick-and-place-demo">Running the Pick and Place Demo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="docking.html">Tutorial: Auto Docking</a><ul>
<li class="toctree-l2"><a class="reference internal" href="docking.html#installing-fetch-auto-dock">Installing fetch_auto_dock</a></li>
<li class="toctree-l2"><a class="reference internal" href="docking.html#running-the-docking-node">Running the Docking Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="docking.html#auto-docking-programmatically">Auto Docking Programmatically</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="calibration.html">Tutorial: Calibrating Fetch</a><ul>
<li class="toctree-l2"><a class="reference internal" href="calibration.html#understanding-calibration">Understanding Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="calibration.html#calibrate-robot-tool">Calibrate Robot Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="calibration.html#running-calibration">Running Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="calibration.html#calibrating-fetch-torso">Calibrating Fetch Torso</a><ul>
<li class="toctree-l3"><a class="reference internal" href="calibration.html#torso-calibration-procedure">Torso Calibration Procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="calibration.html#calibration-output">Calibration Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="calibration.html#output-when-verifying-new-torso-calibration">Output When Verifying New Torso Calibration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fetch_pbd.html">Tutorial: Fetch Programming by Demonstration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fetch_pbd.html#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="fetch_pbd.html#installing-from-source">Installing from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="fetch_pbd.html#running">Running</a></li>
<li class="toctree-l2"><a class="reference internal" href="fetch_pbd.html#using-the-gui">Using the GUI</a></li>
<li class="toctree-l2"><a class="reference internal" href="fetch_pbd.html#code-interface">Code Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="fetch_pbd.html#system-overview">System Overview</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api_overview.html">API Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_overview.html#arm-and-torso">Arm and Torso</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_overview.html#base-interface">Base Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_overview.html#head-interface">Head Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_overview.html#gripper-interface">Gripper Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_overview.html#head-camera-interface">Head Camera Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_overview.html#laser-interface">Laser Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_overview.html#imu-interface">IMU Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_overview.html#resetting-breakers">Resetting Breakers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#september-10-2019">September 10, 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#august-9-2019">August 9, 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#april-4-2019">April 4, 2019</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#december-18-2017">December 18, 2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#november-29-2016">November 29, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#may-28-2016">May 28, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#january-21-2016">January 21, 2016</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#november-23-2015">November 23, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#november-12-2015">November 12, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#august-5-2015">August 5, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#july-9-2015">July 9, 2015</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#june-8-2015">June 8, 2015</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-can-i-cite-fetch-or-freight-in-an-academic-paper">How can I cite Fetch or Freight in an Academic Paper?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#why-won-t-my-robot-do-anything-at-all-charge-move-etc">Why won’t my robot do anything at all (charge, move, etc…)?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#why-won-t-my-robot-turn-on-when-i-push-the-power-button">Why won’t my robot turn on when I push the power button?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#why-won-t-my-robot-move-when-i-use-my-ps3-ps4-joystick">Why won’t my robot move when I use my PS3/PS4 joystick?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#the-robot-will-not-move-and-or-slows-down-near-obstacles-why">The robot will not move and/or slows down near obstacles, why?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#i-just-sent-a-trajectory-command-to-the-arm-and-now-it-won-t-gravity-compensate-help">I just sent a trajectory command to the arm and now it won’t gravity compensate, help?</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notices.html">Notices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="notices.html#fcc-notice">FCC Notice</a></li>
<li class="toctree-l2"><a class="reference internal" href="notices.html#copyright-notices-for-open-source-software">Copyright Notices for Open Source Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="notices.html#trademarks">Trademarks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Fetch & Freight Research Edition</a>
      </nav>

      
      <div class="wy-nav-content">

        <div class="header-override">
          <p>
            <a href="http://www.fetchrobotics.com/research">Fetch & Freight</a><br/>
            <a href="http://www.fetchrobotics.com/blog">Blog</a>
          </p>
          <a href="http://www.fetchrobotics.com"><img src="_static/logo.png"></a>
        </div>

        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>ROS Melodic + Ubuntu 18.04</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="https://github.com/fetchrobotics/docs/blob/master/source/indigo_to_melodic.rst" class="fa fa-github"> Edit on GitHub</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ros-melodic-ubuntu-18-04">
<h1>ROS Melodic + Ubuntu 18.04<a class="headerlink" href="#ros-melodic-ubuntu-18-04" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Rarely, issues may occur with some installs. You should ensure that
your research schedule/needs will allow for a possible prolonged
troubleshooting phase with your robot(s).</p>
</div>
<p>Fetch Robotics has recently started supporting ROS Melodic and Ubuntu 18.04 on
Fetch and Freight robots.  Other than the process of upgrading a robot, there
should be minimal effect on using your robot.  If you observe an issue, please
let us know via a support ticket.</p>
<div class="section" id="known-issues">
<h2>Known issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The PS3 controller does not work as well on 18.04 as it did on 14.04. To achieve
smooth control, the input from the controller will need to be continually varied.
This can be done by continually moving or shaking the controller.  Alternately,
you can <a class="reference internal" href="ps4.html"><span class="doc">switch to using a PS4 controller</span></a>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Gazebo9 and the Fetch have some bugs which we are currently aware of.
If you use Gazebo, please check the status of this <a class="reference external" href="https://github.com/fetchrobotics/fetch_gazebo/issues/37">issue on GitHub</a>.</p>
</div>
</div>
<div class="section" id="upgrading-your-robot-to-ros-melodic-ubuntu-18-04">
<h2>Upgrading Your Robot to ROS Melodic + Ubuntu 18.04<a class="headerlink" href="#upgrading-your-robot-to-ros-melodic-ubuntu-18-04" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Read this document in full to ensure you understand the procedures.  It is
not straightforward to go back to ROS Indigo/Ubuntu 14.04 after doing this.
Ensure your colleagues are on board with doing this upgrade.</p>
</div>
<p>This document is a procedure for <strong>replacing the contents</strong> of your robot’s SSD
with an Ubuntu 18.04 install and ROS Melodic.  All files will be erased!</p>
<div class="section" id="before-upgrade">
<h3>Before Upgrade<a class="headerlink" href="#before-upgrade" title="Permalink to this headline">¶</a></h3>
<p>Back up files from the robot!  All files will be erased, so make sure to save
files specific to your research work. There are a few categories of files to back up:</p>
<ol class="arabic simple">
<li><p>Calibration and other robot-specific files. By convention, these are
all in <code class="docutils literal notranslate"><span class="pre">/etc/ros/[indigo|melodic]/</span></code></p></li>
<li><p>Files relating to your research work</p></li>
<li><p>A record of what packages you installed for ROS Indigo</p></li>
<li><p>Udev rules created for additional hardware (e.g. sensors) added to your robot (not common)</p></li>
<li><p>Network hardware configuration (for troubleshooting)</p></li>
</ol>
<p>Below, we assume that after logging into the robot (e.g. via <code class="docutils literal notranslate"><span class="pre">ssh</span></code>) you back up
files to a machine named HOST with username USER.</p>
<p>For (1), we recommend doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tar</span> <span class="o">-</span><span class="n">zcf</span> <span class="n">fetch_robot_files</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ros</span><span class="o">/</span><span class="n">indigo</span><span class="o">/</span>
<span class="n">scp</span> <span class="n">fetch_robot_files</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="n">USER</span><span class="nd">@HOST</span><span class="p">:</span><span class="o">~/</span>
</pre></div>
</div>
<p>For (2), this may include workspaces, logs, and training data.  You might even
want to back up the entirety of <code class="docutils literal notranslate"><span class="pre">/opt/ros/indigo</span></code> if you are unsure.</p>
<p>For (3), you can easily record the list of packages you installed via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dpkg</span> <span class="o">-</span><span class="n">l</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">ros</span><span class="o">-</span><span class="n">indigo</span> <span class="o">&gt;</span> <span class="n">installed_indigo_packages</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>As well, you might want to record what repositories are part of your workspaces.</p>
<p>For (4), such files are likely located in <code class="docutils literal notranslate"><span class="pre">/etc/udev/rules.d/</span></code>, and should be saved.</p>
<p>For (5), this file may be useful for reference if the install process doesn’t
automatically set up networking on your robot correctly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>scp /etc/udev/rules.d/70-persistent-net.rules USER@HOST:~/$(hostname)_udev_net_rules
</pre></div>
</div>
<p>If you are using any additional hardware (sensors), be sure to record what network
or other hardware configuration changes were made to get them working.</p>
</div>
<div class="section" id="automated-installer-18-04-and-ros-melodic-install">
<h3>AUTOMATED INSTALLER: 18.04 and ROS Melodic Install<a class="headerlink" href="#automated-installer-18-04-and-ros-melodic-install" title="Permalink to this headline">¶</a></h3>
<p>This section guides you through using a custom automated installer that
will set up Ubuntu with ROS packages and Fetch customizations for robots.
You can alternately do a manual install, which is outlined in the next section.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Back up your files as described in the previous section</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This automated installer will not work for setting up a dual booting robot.
For this, we recommend following the manual procedure instead, below.</p>
</div>
<ol class="arabic">
<li><p><strong>Runstop the robot</strong>, to avoid unexpected movement of the robot.</p></li>
<li><p><strong>Create the installer USB flash drive</strong> using a separate computer:</p>
<ol class="arabic simple">
<li><p>In a web browser, navigate to <a class="reference external" href="http://packages.fetchrobotics.com/images/">http://packages.fetchrobotics.com/images/</a> and click and
download the latest fetch_ubuntu_*.iso</p></li>
<li><p>Plug the flash drive into your computer.</p></li>
<li><p>In a terminal, run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">usb-creator-gtk</span></code>. This will open a utility for putting the
install image onto the flash drive.  Select the fetch_ubuntu.iso file (you may have to
browse via “Other”.  Verify the correct disk is selected in the second listbox, and then
click “Make Startup Disk”.
(If usb-creator-gtk fails to work, you probably will need to format the disk using, e.g.,
gParted.  After formatting the USB drive, retry usb-creator-gtk)</p></li>
</ol>
</li>
<li><p><strong>Install OS with ROS, etc. included</strong>:</p>
<ol class="arabic">
<li><p>Plug in the USB flash drive to the robot, as well as a monitor, keyboard and mouse.</p></li>
<li><p>Turn the robot on with the power button, and press either F7 or F11 several times to get
to the boot device selection window shown in the next step. If you fail to get to a
screen like the below, restart the robot and try again:</p></li>
<li><p>The name of the correct option in the boot menu varies based on the flash drive you used.
Typically, it will be similar to “UEFI (FAT) FlashDrive Name”. See the following images
for what to expect and select:</p>
<p><img alt="Boot selection" src="_images/boot_selection.png" /></p>
<p><a class="reference internal" href="_images/install_selection.png"><img alt="Installer selection" src="_images/install_selection.png" style="width: 500px;" /></a></p>
<p><a class="reference internal" href="_images/install_continue.png"><img alt="Continue Install" src="_images/install_continue.png" style="width: 500px;" /></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We have only tested English language installs</p>
</div>
</li>
<li><p>Once the install gets to the following screen, the post-install script will walk you
through the rest of the install.</p>
<p><a class="reference internal" href="_images/install_prompt.png"><img alt="Initial post-install prompt" src="_images/install_prompt.png" style="width: 500px;" /></a></p>
</li>
<li><p>If the robot is not connected to the internet via an ethernet cable, you will next be
prompted to connect to a wifi network in order to install needed packages.  Otherwise,
you will be prompted whether to <em>also</em> connect to a wifi network.</p></li>
<li><p>Next you will be prompted to give the robot’s name.  A name other than fetchXX or freightXX
will result in a non-robot install of Ubuntu 18.04 (with ROS also installed). We recommend
keeping the same hostname for the robot, e.g. <cite>fetch1104</cite></p></li>
<li><p>Once the terminal window changes from blue to white, user input is no longer needed and
you can leave the install to run (15+ minutes, depending on internet speed).</p></li>
<li><p>The <cite>fetch</cite> user will be automatically created, with password ‘robotics’.</p></li>
<li><p>Wait for the install to complete.  The post-install script will restart fairly quickly,
and then resume running/installing after the reboot.  It will then reboot a second time,
at which point you should see a grey Fetch Robotics desktop background, and the install
is complete.</p></li>
<li><p>After the install completes, continue to the Post-install Validation section below.</p></li>
</ol>
</li>
</ol>
<p>If the installer appears to get stuck, please send a picture of the screen to Support.
If it is stuck in one of the initial steps before you get to the language selection
screen, you can try re-running the install, or if that fails, recreating the flash drive.</p>
</div>
<div class="section" id="manual-approach-18-04-install-and-installing-ros-fetch-packages">
<h3>MANUAL APPROACH: 18.04 Install and Installing ROS/Fetch Packages<a class="headerlink" href="#manual-approach-18-04-install-and-installing-ros-fetch-packages" title="Permalink to this headline">¶</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Back up your files as described in the previous section</p>
</div>
<ol class="arabic">
<li><p><strong>Runstop the robot</strong>, to avoid unexpected movement of the robot.</p></li>
<li><p><strong>Install Ubuntu 18.04 on the robot.</strong> Download the latest 18.04 Ubuntu installer from <a class="reference external" href="http://releases.ubuntu.com/18.04/">http://releases.ubuntu.com/18.04/</a>
(in these instructions we use the Desktop image, version 18.04.2).
For help booting from USB, see <a class="reference internal" href="#accessing-boot-menu-on-fetch-robots">Accessing Boot Menu on Fetch Robots</a>.</p>
<ol class="arabic simple">
<li><p>We recommend keeping the same hostname for the robot, e.g. <cite>fetch4</cite></p></li>
<li><p>You can create the <cite>fetch</cite> user, or let it be automatically created later.
(The typical password for the <cite>fetch</cite> user is ‘robotics’.)</p></li>
</ol>
<ul class="simple">
<li><p>After install, you may need to unblock <cite>apt</cite>. Do this by clicking the App Store
icon on the sidebar, which should trigger an update prompt you can close: <img alt="AppStore" src="_images/app_store.jpg" /></p></li>
<li><p>You’ll probably want to install a few convenience packages such as openssh-server
to enable SSH into your robot: <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">openssh-server</span> <span class="pre">net-tools</span></code>.
You might also want to install your favorite commandline text editor.</p></li>
</ul>
</li>
<li><p><strong>Update your Ubuntu install:</strong> <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">update</span> <span class="pre">&amp;&amp;</span> <span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">dist-upgrade</span> <span class="pre">-y</span></code></p></li>
<li><p><strong>Install ROS Melodic</strong> by following the instructions
<a class="reference external" href="http://wiki.ros.org/melodic/Installation/Ubuntu">on the ROS Wiki</a>.
You will want to do steps 1.1 through 1.6. In writing/testing these instructions, we assume:</p>
<ul>
<li><p>You use the <strong>ROS-Base</strong> setup, via the <code class="docutils literal notranslate"><span class="pre">ros-melodic-ros-base</span></code> package.</p></li>
<li><p>You are using bash, so step 1.6 for the fetch user is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">echo</span> <span class="s2">&quot;source /opt/ros/melodic/setup.bash&quot;</span> <span class="o">&gt;&gt;</span> <span class="o">~/.</span><span class="n">bashrc</span>
<span class="n">source</span> <span class="o">~/.</span><span class="n">bashrc</span>
</pre></div>
</div>
<p>You can also make this apply for all new users:
<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">su</span> <span class="pre">-c</span> <span class="pre">'echo</span> <span class="pre">&quot;source</span> <span class="pre">/opt/ros/melodic/setup.bash&quot;</span> <span class="pre">&gt;&gt;</span> <span class="pre">/etc/bash.bashrc'</span></code></p>
</li>
</ul>
</li>
<li><p><strong>NOTE</strong>: at a later time, Fetch may host and recommend its own mirror of ROS Melodic debians.</p></li>
<li><p>Run the following to <strong>install Fetch research debians</strong>:</p>
<ul>
<li><p>General packages for Fetch robots:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">ros</span><span class="o">-</span><span class="n">melodic</span><span class="o">-</span><span class="n">fetch</span><span class="o">-</span><span class="n">calibration</span> <span class="n">ros</span><span class="o">-</span><span class="n">melodic</span><span class="o">-</span><span class="n">fetch</span><span class="o">-</span><span class="nb">open</span><span class="o">-</span><span class="n">auto</span><span class="o">-</span><span class="n">dock</span> \
<span class="n">ros</span><span class="o">-</span><span class="n">melodic</span><span class="o">-</span><span class="n">fetch</span><span class="o">-</span><span class="n">navigation</span> <span class="n">ros</span><span class="o">-</span><span class="n">melodic</span><span class="o">-</span><span class="n">fetch</span><span class="o">-</span><span class="n">tools</span> <span class="o">-</span><span class="n">y</span>
</pre></div>
</div>
</li>
<li><p>Then install packages specific to the robot type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export ROBOTTYPE=$(hostname | awk -F&#39;[0-9]&#39; &#39;{print $1}&#39;)
# sudo apt install $ROBOTTYPE-melodic-config  # pending future availability
wget http://packages.fetchrobotics.com/binaries/$ROBOTTYPE-melodic-config.deb
sudo apt install ./$ROBOTTYPE-melodic-config.deb -y
</pre></div>
</div>
<p>If you get an error regarding <cite>chrony</cite>, do <cite>sudo apt install chrony</cite>, and then try the
melodic-config debian install again.</p>
</li>
</ul>
</li>
<li><p><strong>Power cycle the robot</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">/</span><span class="n">sbin</span><span class="o">/</span><span class="n">reboot</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="post-install-validation">
<h2>Post-install Validation<a class="headerlink" href="#post-install-validation" title="Permalink to this headline">¶</a></h2>
<p>This is a direct continuation of either of the previous sections’ procedure.
It is assumed that your robot is still runstopped.</p>
<p>Verify that things are working.  All of the following steps assume that you are
<code class="docutils literal notranslate"><span class="pre">ssh</span></code>’d into the robot:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="n">fetch</span><span class="nd">@fetchXXXX</span>
</pre></div>
</div>
<ol class="arabic">
<li><p>If your robot has not been upgraded in a while, it is likely that it will need to
automatically upgrade the firmware on its boards. This can take several minutes
to complete after you have rebooted the robot. You can monitor this by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">tail</span> <span class="o">-</span><span class="n">f</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">robot</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
<p>You may see messages like the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span> <span class="n">WARN</span><span class="p">]</span> <span class="p">[</span><span class="mf">1554930321.086981030</span><span class="p">]:</span> <span class="n">Updating</span> <span class="n">wrist_roll_mcb</span> <span class="kn">from</span> <span class="o">-</span><span class="mi">1</span> <span class="n">to</span> <span class="mi">101</span>
<span class="p">[</span> <span class="n">INFO</span><span class="p">]</span> <span class="p">[</span><span class="mf">1554930321.087023328</span><span class="p">]:</span> <span class="n">Updating</span> <span class="n">board</span> <span class="mi">44</span>
<span class="p">[</span> <span class="n">WARN</span><span class="p">]</span> <span class="p">[</span><span class="mf">1554930321.094045845</span><span class="p">]:</span> <span class="n">updating</span> <span class="n">firmware</span> <span class="n">loader</span> <span class="k">for</span> <span class="n">board</span> <span class="mh">0x11</span>
<span class="p">[</span> <span class="n">WARN</span><span class="p">]</span> <span class="p">[</span><span class="mf">1554930323.609072063</span><span class="p">]:</span> <span class="n">updating</span> <span class="n">firmware</span> <span class="n">loader</span> <span class="k">for</span> <span class="n">board</span> <span class="mh">0x11</span>
<span class="p">[</span> <span class="n">WARN</span><span class="p">]</span> <span class="p">[</span><span class="mf">1554930323.614075007</span><span class="p">]:</span> <span class="n">Unexpected</span> <span class="n">response</span> <span class="k">for</span> <span class="n">board</span> <span class="mi">17</span> <span class="p">:</span>  <span class="n">recv_len</span><span class="o">=</span><span class="mi">20</span> <span class="n">board_id</span><span class="o">=</span><span class="mi">17</span> <span class="n">table_</span>
<span class="n">addr</span><span class="o">=</span><span class="mi">16</span> <span class="n">data_len</span><span class="o">=</span><span class="mi">16</span>
<span class="p">[</span> <span class="n">WARN</span><span class="p">]</span> <span class="p">[</span><span class="mf">1554930323.614149147</span><span class="p">]:</span> <span class="n">Unexpected</span> <span class="n">response</span> <span class="k">for</span> <span class="n">board</span> <span class="mi">38</span> <span class="p">:</span>  <span class="n">recv_len</span><span class="o">=</span><span class="mi">20</span> <span class="n">board_id</span><span class="o">=</span><span class="mi">38</span> <span class="n">table_</span>
<span class="n">addr</span><span class="o">=</span><span class="mi">16</span> <span class="n">data_len</span><span class="o">=</span><span class="mi">16</span>
</pre></div>
</div>
<p>If you see the second sort of message, the likely fix is to power cycle the robot again
via <code class="docutils literal notranslate"><span class="pre">rosrun</span> <span class="pre">fetch_drivers</span> <span class="pre">charger_power</span> <span class="pre">reboot</span></code>.</p>
</li>
<li><p>Verify that the robot can ping the mainboard and the laser:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ping</span> <span class="mf">10.42</span><span class="o">.</span><span class="mf">42.42</span>  <span class="c1"># mainboard</span>
<span class="n">ping</span> <span class="mf">10.42</span><span class="o">.</span><span class="mf">42.10</span>  <span class="c1"># laser</span>
</pre></div>
</div>
<p>If not, see <a class="reference internal" href="#ensuring-robot-s-ethernet-ports-are-configured-correctly">Ensuring robot’s ethernet ports are configured correctly</a>.</p>
</li>
<li><p>Verify that the Primesense camera is working (if working with a Fetch robot):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rostopic</span> <span class="nb">list</span> <span class="n">head_camera</span> <span class="o">|</span> <span class="n">wc</span> <span class="o">-</span><span class="n">l</span>
</pre></div>
</div>
<p>This should output 32, if everything is working fine.</p>
</li>
<li><p>At this point, release the robot’s runstop button.</p></li>
<li><p>The gripper should now have power, so we should be able to ping it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ping</span> <span class="mf">10.42</span><span class="o">.</span><span class="mf">42.43</span>  <span class="c1"># gripper</span>
</pre></div>
</div>
<p>If the gripper does not respond, please contact support. We are aware of an issue
affecting some robots, and are gathering information to identify the cause and
best solution.</p>
</li>
<li><p>The arm’s “gravity compensation” should now be working. You should be able to
freely move the arm by hand.</p></li>
<li><p>If applicable, from your non-robot computer, restore the contents of
<code class="docutils literal notranslate"><span class="pre">/etc/ros/indigo</span></code> to <code class="docutils literal notranslate"><span class="pre">/etc/ros/melodic</span></code> on the robot:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scp</span> <span class="n">fetch_robot_files</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="n">fetch</span><span class="nd">@fetchXXX</span><span class="p">:</span><span class="o">~/</span>
<span class="n">ssh</span> <span class="n">fetch</span><span class="nd">@fetchXXX</span>
<span class="n">sudo</span> <span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ros</span><span class="o">/</span><span class="n">melodic</span>
<span class="n">tar</span> <span class="o">-</span><span class="n">xzf</span> <span class="o">~/</span><span class="n">fetch_robot_files</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="o">-</span><span class="n">C</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">ros</span><span class="o">/</span><span class="n">melodic</span><span class="o">/</span>
</pre></div>
</div>
<p><strong>Important</strong>: You should modify <code class="docutils literal notranslate"><span class="pre">/etc/ros/melodic/robot.launch</span></code> to replace any
instances of <code class="docutils literal notranslate"><span class="pre">indigo</span></code> with <code class="docutils literal notranslate"><span class="pre">melodic</span></code></p>
<p>As well, you can restore any other saved files to the robot.</p>
<p>This is the point at which some things may not work fully, e.g. if packages
used in ROS Indigo need updates/replacements for ROS Melodic.</p>
<ol class="arabic">
<li><p>Verify that calibration is installed: a date should be output if you run
the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>fetch@fetch3:~$ calibrate_robot --date
2018-11-26 14:48:04
</pre></div>
</div>
</li>
<li><p>To restart the drivers so that your restored files are used, with the arm
safely resting so that it won’t fall, restart roscore:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">service</span> <span class="n">roscore</span> <span class="n">restart</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Set up your teleop controller. By default, a fresh install will not have the service
for either controller active, and the user will need to enable the appropriate
service. (Note, only one or the other can be set up at a time.)</p>
<ul>
<li><p><strong>PS4</strong>: The PS4 controller is newly supported on our robots with 18.04. The PS4
controller works better than the PS3 controller and is recommended. You can
acquire one from e.g. Amazon. Note that third party PS4 controllers may not work.</p>
<ol class="arabic">
<li><p>Pair the controller via the Bluetooth settings in Ubuntu. For more detail,
see <a class="reference internal" href="ps4.html"><span class="doc">here</span></a>.</p></li>
<li><p>Disconnect the controller by holding the middle button for 10 seconds.</p></li>
<li><p>Connect the controller by pressing the middle button and then waiting until the LED
is blue and not flashing.</p></li>
<li><p>You can verify that the controller is connected properly by watching the output
of <code class="docutils literal notranslate"><span class="pre">jstest</span> <span class="pre">/dev/ps4joy</span></code> and pressing buttons on the controller.</p></li>
<li><p><strong>If</strong> you did keep your old /etc/ros/indigo/robot.launch and are switching to a PS4
controller, you will need to:</p>
<ol class="arabic">
<li><p>Find and modify/add the following lines in <code class="docutils literal notranslate"><span class="pre">/etc/ros/melodic/robot.launch</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="o">&lt;</span><span class="n">include</span> <span class="n">file</span><span class="o">=</span><span class="s2">&quot;$(find freight_bringup)/launch/include/teleop.launch.xml&quot;</span> <span class="o">/&gt;</span>
<span class="o">+</span> <span class="o">&lt;</span><span class="n">include</span> <span class="n">file</span><span class="o">=</span><span class="s2">&quot;$(find freight_bringup)/launch/include/teleop.launch.xml&quot;</span><span class="o">&gt;</span>
<span class="o">+</span>   <span class="o">&lt;</span><span class="n">arg</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;ps4&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="o">/&gt;</span>
<span class="o">+</span> <span class="o">&lt;/</span><span class="n">include</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>Then, with the arm safely resting so that it won’t fall, restart roscore:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">service</span> <span class="n">roscore</span> <span class="n">restart</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Monitoring <code class="docutils literal notranslate"><span class="pre">/joy</span></code> topic should similarly reflect inputs on the controller.</p></li>
<li><p>The controller should work to teleop the robot.</p></li>
</ol>
</li>
<li><p><strong>PS3</strong>: Check whether your PS3 controller pairs and controls the robot:</p>
<ol class="arabic simple">
<li><p>You do not need to re-pair the controller, generally, it should still connect.</p></li>
<li><p>Connect the controller by pressing the center button. Note: LEDs will continually flash
even when the connection is successful.</p></li>
<li><p>You can verify that the controller is connected properly by watching the output
of <code class="docutils literal notranslate"><span class="pre">jstest</span> <span class="pre">/dev/ps3joy</span></code> and pressing buttons on the controller.</p></li>
<li><p>Monitoring <code class="docutils literal notranslate"><span class="pre">/joy</span></code> topic should now reflect inputs on the controller.</p></li>
<li><p>The controller should work to teleop the robot.</p></li>
</ol>
<p><strong>Important note</strong>: for 18.04 the robots have switched from using sixad to using
PS3joy.  While you do not need to re-pair the controller to the computer, note that
the utility for doing so is now located at <code class="docutils literal notranslate"><span class="pre">/opt/ros/melodic/lib/ps3joy/sixpair</span></code>.
Some other changes in behaviour you may see:</p>
<ul class="simple">
<li><p>Inputs may are sent from the PS3 controller once per second, unless motion is detected
via the accelerometer/gyro in the PS3 controller. This can result in jerky motion
when using the controller.</p></li>
<li><p>The LEDs on the PS3 controller will continually blink, even though it is connected.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>At this point the robot is probably working fine and is ready for use! (Unless you
have additional customizations to restore)</p></li>
</ol>
</div>
<div class="section" id="compatibility-of-other-computers-used-with-the-robot">
<h2>Compatibility of Other Computers Used with the Robot<a class="headerlink" href="#compatibility-of-other-computers-used-with-the-robot" title="Permalink to this headline">¶</a></h2>
<p>For working with a robot running ROS Melodic, we recommend using an 18.04 Ubuntu
machine that also has ROS Melodic installed.</p>
<ul class="simple">
<li><p>In order for the robot to appear correctly in RViz, you will want to:</p>
<ul>
<li><p>Ensure your computer is pointed at the packages.ros apt sources</p></li>
<li><p>Install <code class="docutils literal notranslate"><span class="pre">ros-melodic-fetch-description</span></code> and <code class="docutils literal notranslate"><span class="pre">ros-melodic-freight-description</span></code>
packages.  Addtionally you might want to install
<a class="reference external" href="https://github.com/fetchrobotics/fetch_tools">ros-melodic-fetch-tools</a>.</p></li>
<li><p>Ensure that these packages are included in your path (e.g.
<code class="docutils literal notranslate"><span class="pre">rospack</span> <span class="pre">find</span> <span class="pre">fetch_description</span></code> returns a path)</p></li>
<li><p>Common gotcha on a new setup: If the robot model doesn’t appear in RViz at
first, you may need to change the “Fixed frame” from e.g. ‘map’ to ‘odom’.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="not-supported-upgrading-from-14-04-to-18-04-via-16-04">
<h2>Not Supported: Upgrading from 14.04 to 18.04 (via 16.04)<a class="headerlink" href="#not-supported-upgrading-from-14-04-to-18-04-via-16-04" title="Permalink to this headline">¶</a></h2>
<p>Fetch Robotics does not recommend this approach and <em>cannot</em> provide support for this.
However, if you desire to try to upgrade, the following may be helpful:</p>
<ul class="simple">
<li><p>Back up files as described above, or even the full disk if you like.</p></li>
<li><p>You cannot upgrade Ubuntu directly from 14.04 to 18.04. You must first
upgrade to 16.04, then upgrade to 18.04. This can take a long time.</p></li>
<li><p>You should review the postinstall script for <code class="docutils literal notranslate"><span class="pre">fetch-melodic-config</span></code>. It is not
targeted at upgrading a system, so additional tweaks may be required after
installing it.</p></li>
</ul>
</div>
<div class="section" id="appendices">
<h2>Appendices<a class="headerlink" href="#appendices" title="Permalink to this headline">¶</a></h2>
<div class="section" id="subsequent-upgrade-notes">
<h3>Subsequent upgrade notes<a class="headerlink" href="#subsequent-upgrade-notes" title="Permalink to this headline">¶</a></h3>
<p>When doing an upgrade of the robot, always follow the steps at
<span class="xref std std-doc">Updating Your Robot</span>.</p>
<p>Particularly if you upgraded to 18.04 prior to August 2019, when doing an upgrade
of packages via <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">upgrade</span></code>, you may be prompted regarding changed files:</p>
<ul class="simple">
<li><p>/etc/default/grub</p></li>
<li><p>/etc/udev/rules.d/99-ps3joy.rules</p></li>
<li><p>/etc/udev/rules.d/99-ds4drv.rules</p></li>
</ul>
<p>It is fine to select “install the package maintainer’s version.”</p>
</div>
<div class="section" id="accessing-boot-menu-on-fetch-robots">
<h3>Accessing Boot Menu on Fetch Robots<a class="headerlink" href="#accessing-boot-menu-on-fetch-robots" title="Permalink to this headline">¶</a></h3>
<p>You may need to access the boot menu in order to boot from a USB flash
drive and install Ubuntu 18.04.  Due to different computer motherboards used in the
past, Fetch research robots may be using one of two BIOS flavors.  Older robots
use an MSI branded BIOS.  Newer robots use American Megatrends Inc. (AMI).</p>
<p>These different BIOS types activate the boot media selection menu with different keys:</p>
<ul class="simple">
<li><p>If your robot shows the MSI splash screen at boot, press F11 to access the boot menu.</p></li>
<li><p>If your robot shows the black AMI splash screen at boot (this lasts for about 1 second),
press F7 to access the boot menu.</p></li>
</ul>
<p>If you fail to get into the boot menu, you can restart the computer and try again.</p>
</div>
<div class="section" id="disk-filling-issue">
<h3>Disk filling issue<a class="headerlink" href="#disk-filling-issue" title="Permalink to this headline">¶</a></h3>
<p>Some robots may encounter an issue where Gnome3 fills the disk by spamming /var/log/syslog.
This issue has a fix that is not available via <cite>apt</cite> yet, but can be manually done:
<a class="reference external" href="https://bugs.launchpad.net/ubuntu/+source/gnome-shell/+bug/1772677/comments/63">see comments here</a>.</p>
</div>
<div class="section" id="ensuring-robot-s-ethernet-ports-are-configured-correctly">
<h3>Ensuring robot’s ethernet ports are configured correctly<a class="headerlink" href="#ensuring-robot-s-ethernet-ports-are-configured-correctly" title="Permalink to this headline">¶</a></h3>
<p>If you previously did the upgrade to Ubuntu 18.04 prior to August 2019, you should make
the following fix to the ethernet IP specifications to avoid issues with internet
access/routing:</p>
<ol class="arabic simple">
<li><p>Edit <code class="docutils literal notranslate"><span class="pre">/etc/netplan/99-fetch-ethernet.yaml</span></code> and remove any lines referencing
<code class="docutils literal notranslate"><span class="pre">gateway4</span></code>.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">netplan</span> <span class="pre">apply</span></code></p></li>
<li><p>Power cycle the robot (only needed if you’re actively having issues).</p></li>
</ol>
<p>The robot has two ethernet ports on its computer. You can find more information on this
at <a class="reference internal" href="computer.html"><span class="doc">Computer Overview and Configuration</span></a>.</p>
<p>A problem you may encounter after getting 18.04 installed is if these two
ports are “swapped”.  This will cause the robot computer to be unable to talk to the
rest of its hardware. You can fix this in software or in hardware:</p>
<ul class="simple">
<li><p>Software: Edit <code class="docutils literal notranslate"><span class="pre">/etc/udev/rules.d/70-persistent-net.rules</span></code> and swap <code class="docutils literal notranslate"><span class="pre">eth0</span></code>
and <code class="docutils literal notranslate"><span class="pre">eth1</span></code>. Restart the robot for the change to take effect.</p></li>
<li><p>OR: Hardware: swap the two ethernet cables where they plug into the computer.
This shouldn’t be needed, but in case you do, you should expect to find
a gray cable (internal communications) and a blue cable (external).
Typically, the blue goes to the top ethernet port, and the grey goes to the bottom.</p></li>
</ul>
<p>Another issue you may encounter with 18.04 is if you are using the ethernet on the
side access panel with a DHCP setup. In some setups, the ethernet port may fail to
be assigned an IP automatically. We recommend consulting IT for help with this, if
needed.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="visualization.html" class="btn btn-neutral float-right" title="Tutorial: Visualization" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="care_and_feeding.html" class="btn btn-neutral" title="Care And Feeding" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2019, Fetch Robotics Inc.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'Melodic',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/language_data.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>